(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{138:function(e,a,t){e.exports=t(319)},319:function(e,a,t){"use strict";t.r(a);var n={};t.r(n),t.d(n,"delImage",function(){return B}),t.d(n,"changePosition",function(){return H}),t.d(n,"delMenu",function(){return L}),t.d(n,"delPage",function(){return W}),t.d(n,"getMenus",function(){return V}),t.d(n,"getPages",function(){return q}),t.d(n,"addMenu",function(){return K}),t.d(n,"saveMenu",function(){return z}),t.d(n,"savePage",function(){return G}),t.d(n,"changeMenu",function(){return Q}),t.d(n,"changePage",function(){return X});var r={};t.r(r),t.d(r,"getClients",function(){return de});var s={};t.r(s),t.d(s,"signup",function(){return be}),t.d(s,"signin",function(){return Ee}),t.d(s,"signout",function(){return je});var c=t(0),o=t.n(c),i=t(25),l=t.n(i),u=t(43),p=t(38),m=t(14),d=t(4),g=t(12),h=t(132),f=t(322),v="pages_res",y={authenticated:"",errorMessage:""},b={menus:[],page:{},pages:[]},E={users:[]},j=Object(g.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"auth_user":return Object(m.a)({},e,{authenticated:a.payload});case"auth_error":return Object(m.a)({},e,{errorMessage:a.payload});default:return e}},pages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"pages_add_menu":var t=e.menus.slice();return t.push(a.payload),Object(m.a)({},e,{menus:t});case"pages_save_page":return Object(m.a)({},e,{page:{title:"",short_title:"",published:0,type:"cms",menu_id:""}});case"pages_change_menu":var n=e.menus.map(function(e){return e.id===a.payload.id?a.payload:e});return Object(m.a)({},e,{menus:n,pages_res:{}});case"pages_change_page":return Object(m.a)({},e,{page:a.payload,pages_res:{}});case v:return Object(m.a)({},e,{pages_res:a.payload});case"pages_get_menu":return Object(m.a)({},e,{menus:a.payload});case"pages_save_pages":return Object(m.a)({},e,{pages:a.payload});case"pages_delete_menu":var r=e.menus.slice(),s=[],c=!0,o=!1,i=void 0;try{for(var l,u=r[Symbol.iterator]();!(c=(l=u.next()).done);c=!0){var p=l.value;p.id!==a.payload&&s.push(p)}}catch(w){o=!0,i=w}finally{try{c||null==u.return||u.return()}finally{if(o)throw i}}return Object(m.a)({},e,{menus:s});case"pages_delete_page":var d=e.pages.slice(),g=[],h=!0,f=!1,y=void 0;try{for(var E,j=d[Symbol.iterator]();!(h=(E=j.next()).done);h=!0){var O=E.value;O.id!==a.payload&&g.push(O)}}catch(w){f=!0,y=w}finally{try{h||null==j.return||j.return()}finally{if(f)throw y}}return Object(m.a)({},e,{pages:g});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"users_res":return Object(m.a)({},e,{users_res:a.payload});case"users_get_clients":return Object(m.a)({},e,{clients:a.payload});default:return e}},form:f.a}),O=t(134),w=t(6),k=t(7),_=t(9),N=t(8),x=t(10),P=function(e){function a(){return Object(w.a)(this,a),Object(_.a)(this,Object(N.a)(a).apply(this,arguments))}return Object(x.a)(a,e),Object(k.a)(a,[{key:"renderLinks",value:function(){if(this.props.authenticated)return o.a.createElement("div",{className:"container-fluid"},o.a.createElement("div",{className:"container"},o.a.createElement(u.b,{to:"/admin/pages"},"Pages"),o.a.createElement(u.b,{className:"ml-4",to:"/admin/users"},"Users")),o.a.createElement(u.b,{to:"/admin/signout"},"Sign Out"))}},{key:"render",value:function(){return o.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},this.renderLinks())}}]),a}(c.Component);var C=Object(d.b)(function(e){return{authenticated:e.auth.authenticated}})(P),M=function(e){var a=function(a){function t(){return Object(w.a)(this,t),Object(_.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(x.a)(t,a),Object(k.a)(t,[{key:"componentDidMount",value:function(){this.shouldNavigateAway()}},{key:"componentDidUpdate",value:function(){this.shouldNavigateAway()}},{key:"shouldNavigateAway",value:function(){this.props.auth||this.props.history.push("/admin/")}},{key:"render",value:function(){return o.a.createElement(e,this.props)}}]),t}(c.Component);return Object(d.b)(function(e){return{auth:e.auth.authenticated}})(a)},S=t(13),I=t.n(S),A=t(20),D=t(18),R=t.n(D),T=function(e,a){var t=null,n=!0,r=!1,s=void 0;try{for(var c,o=e[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var i=c.value;if(i.id===a){t=i;break}}}catch(l){r=!0,s=l}finally{try{n||null==o.return||o.return()}finally{if(r)throw s}}return t},U=function(e){return!!e&&e[0]+e[1]+e[2]==="rs_"},F=function(e,a){var t=[];if(U(a))return t;var n=!0,r=!1,s=void 0;try{for(var c,o=e[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var i=c.value;a||i.menu_id?parseInt(i.menu_id)===a&&t.push(i):t.push(i)}}catch(l){r=!0,s=l}finally{try{n||null==o.return||o.return()}finally{if(r)throw s}}return t},J="http://cmsrs3.loc",B=function(e,a){return function(){var t=Object(A.a)(I.a.mark(function t(n){var r,s;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=localStorage.getItem("token"),t.prev=1,t.next=4,R.a.delete(J+"/api/images/"+e+"?token="+r);case 4:(s=t.sent).data.success?n({type:v,payload:{success:!0,message:"Data was saved"}}):n({type:v,payload:{success:!1,message:s.data.error}}),a(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n({type:v,payload:{success:!1,message:"Unknown problem with ajax, while deleteing image"}});case 12:case"end":return t.stop()}},t,null,[[1,9]])}));return function(e){return t.apply(this,arguments)}}()},H=function(e,a,t,n){return function(){var r=Object(A.a)(I.a.mark(function r(s){var c;return I.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return c=localStorage.getItem("token"),r.prev=1,r.next=4,R.a.get(J+"/api/"+t+"/position/"+e+"/"+a+"?token="+c);case 4:r.sent.data.success?s({type:v,payload:{success:!0,message:"Data was saved"}}):s({type:v,payload:{success:!1,message:"Problem with change position "+t}}),n(),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),s({type:v,payload:{success:!1,message:"Unknown problem with ajax, while change "+t+" position"}});case 12:case"end":return r.stop()}},r,null,[[1,9]])}));return function(e){return r.apply(this,arguments)}}()},L=function(e){return function(){var a=Object(A.a)(I.a.mark(function a(t){var n,r,s;return I.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(n=localStorage.getItem("token"),r=U(e),a.prev=2,r){a.next=8;break}return a.next=6,R.a.delete(J+"/api/menus/"+e+"?token="+n);case 6:(s=a.sent).data.success?t({type:v,payload:{success:!0,message:"Data was saved"}}):t({type:v,payload:{success:!1,message:s.data.error}});case 8:t({type:"pages_delete_menu",payload:e}),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(2),t({type:v,payload:{success:!1,message:"Unknown problem with ajax, while deleteing menu"}});case 14:case"end":return a.stop()}},a,null,[[2,11]])}));return function(e){return a.apply(this,arguments)}}()},W=function(e){return function(){var a=Object(A.a)(I.a.mark(function a(t){var n,r;return I.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=localStorage.getItem("token"),a.prev=1,a.next=4,R.a.delete(J+"/api/pages/"+e+"?token="+n);case 4:(r=a.sent).data.success?t({type:v,payload:{success:!0,message:"Data was saved"}}):t({type:v,payload:{success:!1,message:r.data.error}}),t({type:"pages_delete_page",payload:e}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),t({type:v,payload:{success:!1,message:"Unknown problem with ajax, while deleteing page"}});case 12:case"end":return a.stop()}},a,null,[[1,9]])}));return function(e){return a.apply(this,arguments)}}()},V=function(){return function(){var e=Object(A.a)(I.a.mark(function e(a){var t,n;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.prev=1,e.next=4,R.a.get(J+"/api/menus?token="+t);case 4:n=e.sent,a({type:"pages_get_menu",payload:n.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a({type:v,payload:{success:!1,message:"Unknown problem with ajax, while get menu"}});case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(a){return e.apply(this,arguments)}}()},q=function(){return function(){var e=Object(A.a)(I.a.mark(function e(a){var t,n;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.prev=1,e.next=4,R.a.get(J+"/api/pages?token="+t);case 4:n=e.sent,a({type:"pages_save_pages",payload:n.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a({type:v,payload:{success:!1,message:"Unknown problem with ajax, while get pages"}});case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(a){return e.apply(this,arguments)}}()},K=function(e){return function(a){a({type:"pages_add_menu",payload:e})}},z=function(e,a){return function(){var t=Object(A.a)(I.a.mark(function t(n){var r,s,c;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=localStorage.getItem("token"),s=U(e.id),t.prev=2,c=null,!s){t.next=10;break}return t.next=7,R.a.post(J+"/api/menus?token="+r,e);case 7:c=t.sent,t.next=13;break;case 10:return t.next=12,R.a.put(J+"/api/menus/"+e.id+"?token="+r,e);case 12:c=t.sent;case 13:c.data.success?(console.log("___ok___"),n({type:v,payload:{success:!0,message:"Data was saved"}}),a()):n({type:v,payload:{success:!1,message:c.data.error}}),t.next=20;break;case 16:t.prev=16,t.t0=t.catch(2),console.log("___probem with ajax______",t.t0),n({type:v,payload:{success:!1,message:"Unknown problem with ajax, while save Menu"}});case 20:case"end":return t.stop()}},t,null,[[2,16]])}));return function(e){return t.apply(this,arguments)}}()},G=function(e,a){return function(){var t=Object(A.a)(I.a.mark(function t(n){var r,s,c;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=localStorage.getItem("token"),t.prev=1,s=null,!e.id){t.next=9;break}return t.next=6,R.a.put(J+"/api/pages/"+e.id+"?token="+r,e);case 6:s=t.sent,t.next=12;break;case 9:return t.next=11,R.a.post(J+"/api/pages?token="+r,e);case 11:s=t.sent;case 12:s.data.success?(c=e.id?e.id:s.data.data.pageId,n({type:v,payload:{success:!0,message:"Data was saved"}}),n({type:"pages_save_page",payload:e}),a(c)):n({type:v,payload:{success:!1,message:s.data.error}}),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(1),console.log("___probem with ajax______",t.t0),n({type:v,payload:{success:!1,message:"Unknown problem with ajax, while save page"}});case 19:case"end":return t.stop()}},t,null,[[1,15]])}));return function(e){return t.apply(this,arguments)}}()},Q=function(e){return function(a){a({type:"pages_change_menu",payload:e})}},X=function(e){return function(a){a({type:"pages_change_page",payload:e})}},Y=t(37),Z=function(e){function a(e){var t;return Object(w.a)(this,a),(t=Object(_.a)(this,Object(N.a)(a).call(this,e))).delPage=function(){t.props.delPage(t.data.id)},t.getDataFromProps=function(){var e=t.props.pages.filter(function(e){return e.id===t.data.id});return e.length?e[0]:{}},t.downPage=function(){t.props.changePosition("down",t.data.id,"pages",function(){t.props.getPages()})},t.upPage=function(){t.props.changePosition("up",t.data.id,"pages",function(){t.props.getPages()})},t.editPage=function(){var e=t.getDataFromProps();t.props.changePage(e)},t.data=t.props.data,t}return Object(x.a)(a,e),Object(k.a)(a,[{key:"render",value:function(){var e=this.getDataFromProps(),a=F(this.props.pages,e.menu_id);return o.a.createElement("div",{className:"mb-2 row"},o.a.createElement("div",null,e.title),o.a.createElement("div",{className:"ml-2 mr-2",onClick:this.editPage},o.a.createElement("i",{className:"far fa-edit cursor-pointer"})),o.a.createElement("div",{className:"trash",onClick:this.delPage},o.a.createElement("i",{className:"fas fa-trash cursor-pointer","aria-hidden":"true"})),a.length>1&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"ml-2",onClick:this.downPage},o.a.createElement("i",{className:"fas fa-arrow-down cursor-pointer"})),o.a.createElement("div",{className:"ml-2",onClick:this.upPage},o.a.createElement("i",{className:"fas fa-arrow-up cursor-pointer"}))))}}]),a}(c.Component);var $=Object(d.b)(function(e){return{pages:e.pages.pages}},n)(Z),ee=function(e){function a(e){var t;return Object(w.a)(this,a),(t=Object(_.a)(this,Object(N.a)(a).call(this,e))).handleChange=function(e){var a=T(t.props.menus,t.data.id),n=Object(m.a)({},a,Object(Y.a)({},e.target.name,e.target.value));t.props.changeMenu(n)},t.getCountMenu=function(){var e=[],a=!0,n=!1,r=void 0;try{for(var s,c=t.props.menus[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var o=s.value;U(o.id)||e.push(o)}}catch(i){n=!0,r=i}finally{try{a||null==c.return||c.return()}finally{if(n)throw r}}return e.length},t.saveMenu=function(){var e=T(t.props.menus,t.data.id);e.position||(e.position=t.getCountMenu()+1),t.props.saveMenu(e,function(){t.props.getMenus()})},t.delMenu=function(){t.props.delMenu(t.data.id)},t.showPageTitle=function(e){var a="";return Array.isArray(e)&&(a=e.map(function(e,a){return o.a.createElement($,{key:e.id,data:e})})),a},t.downMenu=function(){t.props.changePosition("down",t.data.id,"menus",function(){t.props.getMenus()})},t.upMenu=function(){t.props.changePosition("up",t.data.id,"menus",function(){t.props.getMenus()})},t.data=t.props.data,t}return Object(x.a)(a,e),Object(k.a)(a,[{key:"render",value:function(){var e={},a=!1;Array.isArray(this.props.menus)&&(e=T(this.props.menus,this.data.id),a=U(e.id));var t=F(this.props.pages,this.data.id);return o.a.createElement("div",null,o.a.createElement("div",{className:"form-group form-inline mb-2"},o.a.createElement("input",{type:"text",placeholder:"Menu name",name:"name",className:"form-control col-3 mr-1",onChange:this.handleChange,value:e.name||""}),o.a.createElement("div",{className:"ml-2",onClick:this.saveMenu},o.a.createElement("i",{className:"far fa-save cursor-pointer"})),o.a.createElement("div",{className:"ml-2 trash",onClick:this.delMenu},o.a.createElement("i",{className:"fas fa-trash cursor-pointer","aria-hidden":"true"})),!a&&this.getCountMenu()>1&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"ml-2",onClick:this.downMenu},o.a.createElement("i",{className:"fas fa-arrow-down cursor-pointer"})),o.a.createElement("div",{className:"ml-2",onClick:this.upMenu},o.a.createElement("i",{className:"fas fa-arrow-up cursor-pointer"})))),o.a.createElement("div",{className:"ml-3"},this.showPageTitle(t)))}}]),a}(c.Component);var ae=Object(d.b)(function(e){return{menus:e.pages.menus,pages:e.pages.pages}},n)(ee),te=function(e){function a(){var e,t;Object(w.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(_.a)(this,(e=Object(N.a)(a)).call.apply(e,[this].concat(r)))).delImage=function(){t.props.delImage(t.props.data.id,function(){t.props.getPages()})},t.downImage=function(){t.props.changePosition("down",t.props.data.id,"images",function(){t.props.getPages()})},t.upImage=function(){t.props.changePosition("up",t.props.data.id,"images",function(){t.props.getPages()})},t}return Object(x.a)(a,e),Object(k.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"ml-1  mt-3 row"},o.a.createElement("img",{src:J+this.props.data.fs.small,alt:this.props.data.name}),o.a.createElement("div",{className:"trash ml-2",onClick:this.delImage},o.a.createElement("i",{className:"fas fa-trash cursor-pointer","aria-hidden":"true"})),this.props.imagesByPage.length>1&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"ml-2",onClick:this.downImage},o.a.createElement("i",{className:"fas fa-arrow-down cursor-pointer"})),o.a.createElement("div",{className:"ml-2",onClick:this.upImage},o.a.createElement("i",{className:"fas fa-arrow-up cursor-pointer"}))))}}]),a}(c.Component),ne=Object(d.b)(null,n)(te),re=function(e){function a(){var e,t;Object(w.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(_.a)(this,(e=Object(N.a)(a)).call.apply(e,[this].concat(r)))).getPagePositionByMenuId=function(e){return e=e?parseInt(e):null,F(t.props.pages,e).length+1},t.handleSubmit=function(e){e.preventDefault();var a=Object(m.a)({},t.props.page);a.position=t.getPagePositionByMenuId(a.menu_id),a.images=t.images?t.images.slice():[],t.props.savePage(a,function(e){document.getElementsByName("images")[0].value=null,t.images=[],t.props.getPages()})},t.handleChangePage=function(e){var a;a="published"===e.target.name?Object(m.a)({},t.props.page,Object(Y.a)({},e.target.name,e.target.checked)):Object(m.a)({},t.props.page,Object(Y.a)({},e.target.name,e.target.value)),t.props.changePage(a)},t.createImage=function(e){t.images=[];for(var a=function(a){var n=e[a],r=e[a].name,s=new FileReader;s.onload=function(e){t.images.push({data:e.target.result,name:r})},s.readAsDataURL(n)},n=0;n<e.length;n++)a(n)},t.handleUploadFile=function(e){var a=e.target.files;a.length&&t.createImage(a)},t.showImages=function(e){var a="";return Array.isArray(e)&&(a=e.map(function(a,t){return o.a.createElement(ne,{key:a.id,data:a,imagesByPage:e})})),a},t.getImages=function(e,a){var t=e.filter(function(e){return e.id===a});return t.length&&t[0].images.length?t[0].images:[]},t}return Object(x.a)(a,e),Object(k.a)(a,[{key:"componentDidMount",value:function(){this.props.getPages()}},{key:"getMenuValues",value:function(){var e=[];e.push({id:null,name:""});var a=!0,t=!1,n=void 0;try{for(var r,s=this.props.menus[Symbol.iterator]();!(a=(r=s.next()).done);a=!0){var c=r.value;U(c.id)||e.push(c)}}catch(o){t=!0,n=o}finally{try{a||null==s.return||s.return()}finally{if(t)throw n}}return e}},{key:"render",value:function(){var e=this.getMenuValues(),a=[];this.props.page.id&&(a=this.getImages(this.props.pages,this.props.page.id));var t=this.props.page.id?"Edit page":"Add page";return o.a.createElement("div",null,o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("button",{type:"submit",className:"add-page-btn  btn btn-primary mt-2 mb-2"},o.a.createElement("i",{className:"fas fa-plus"})," ",t),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"text",placeholder:"Title",name:"title",className:"form-control col-5",onChange:this.handleChangePage,value:this.props.page.title||""})),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"text",placeholder:"Short title",name:"short_title",className:"form-control col-5",onChange:this.handleChangePage,value:this.props.page.short_title||""})),o.a.createElement("div",{className:"form-check row"},o.a.createElement("input",{className:"col-1",name:"published",type:"checkbox",checked:this.props.page.published||0,onChange:this.handleChangePage}),o.a.createElement("label",null,"Published")),o.a.createElement("div",{className:"form-group"},o.a.createElement("select",{name:"type",onChange:this.handleChangePage,value:this.props.page.type},o.a.createElement("option",{value:"cms"},"cms"),o.a.createElement("option",{value:"gallery"},"gallery")),o.a.createElement("label",{className:"ml-1"},"Type")),o.a.createElement("div",{className:"form-group"},o.a.createElement("select",{name:"menu_id",onChange:this.handleChangePage,value:this.props.page.menu_id||""},e.map(function(e){return o.a.createElement("option",{key:e.id,value:e.id||""},e.name||"")})),o.a.createElement("label",{className:"ml-1"},"Menu")),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"comment"},"Content"),o.a.createElement("textarea",{className:"form-control",rows:"5",name:"content",onChange:this.handleChangePage,value:this.props.page.content||""})),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"file",name:"images",onChange:this.handleUploadFile,multiple:!0})),this.showImages(a)))}}]),a}(c.Component);var se=Object(d.b)(function(e){return{menus:e.pages.menus,pages:e.pages.pages,page:e.pages.page}},n)(re),ce=t(136),oe=t.n(ce),ie=function(e){function a(e){var t;return Object(w.a)(this,a),(t=Object(_.a)(this,Object(N.a)(a).call(this,e))).state={visible:!0},t}return Object(x.a)(a,e),Object(k.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.children!==this.props.children&&(this.setTimer(),this.setState({visible:!0}))}},{key:"componentDidMount",value:function(){this.setTimer()}},{key:"setTimer",value:function(){null!=this._timer&&clearTimeout(this._timer),this._timer=setTimeout(function(){this.setState({visible:!1}),this._timer=null}.bind(this),this.props.delay)}},{key:"componentWillUnmount",value:function(){clearTimeout(this._timer)}},{key:"render",value:function(){return this.state.visible?o.a.createElement("div",null,this.props.children):o.a.createElement("span",null)}}]),a}(o.a.Component),le=function(e){function a(){var e,t;Object(w.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(_.a)(this,(e=Object(N.a)(a)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault()},t.getNotRelatedPages=function(){var e=[],a=!0,n=!1,r=void 0;try{for(var s,c=t.props.pages[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var o=s.value;o.menu_id||e.push(o)}}catch(i){n=!0,r=i}finally{try{a||null==c.return||c.return()}finally{if(n)throw r}}return e},t.showMenuPages=function(e){var a="";return Array.isArray(e)&&(a=e.map(function(e,a){return o.a.createElement(ae,{key:e.id,data:e})})),a},t.showPageTitle=function(e){var a="";return Array.isArray(e)&&(a=e.map(function(e,a){return o.a.createElement($,{key:e.id,data:e})})),a},t.handleAddMenu=function(){var e={id:"rs_"+oe.a.generate(),name:"",position:""};t.props.addMenu(e)},t.renderMsg=function(e){return console.log("msg_err",e),JSON.stringify(e,null,2)},t}return Object(x.a)(a,e),Object(k.a)(a,[{key:"componentDidMount",value:function(){this.props.getMenus(),this.props.getPages()}},{key:"render",value:function(){var e=this.getNotRelatedPages(),a="";this.props.pagesRes&&!1===this.props.pagesRes.success&&(a=o.a.createElement(ie,{delay:5e3},o.a.createElement("div",{className:"alert alert-danger",role:"alert"},JSON.stringify(this.props.pagesRes.message,null,2)))),this.props.pagesRes&&!0===this.props.pagesRes.success&&(a=o.a.createElement(ie,{delay:5e3},o.a.createElement("div",{className:"alert alert-success",role:"alert"},JSON.stringify(this.props.pagesRes.message,null,2))));var t=this.props.menus;return o.a.createElement("div",{className:"mt-3 mb-2"},o.a.createElement("div",{className:"wrapMsg"},a),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-6"},o.a.createElement("button",{id:"add_menu",className:"btn btn-primary mt-2 mb-2",onClick:this.handleAddMenu},o.a.createElement("i",{className:"fas fa-plus"})," Add menu"),o.a.createElement("form",{onSubmit:this.handleSubmit},this.showMenuPages(t)),e.length>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement("h3",{className:"mt-3"},"Pages not related to menu"),o.a.createElement("div",{className:"ml-3"},this.showPageTitle(e)))),o.a.createElement("div",{className:"col-6"},o.a.createElement(se,null))))}}]),a}(c.Component);var ue=Object(d.b)(function(e){return{menus:e.pages.menus,pages:e.pages.pages,pagesRes:e.pages.pages_res}},n)(le),pe=function(e){function a(){return Object(w.a)(this,a),Object(_.a)(this,Object(N.a)(a).apply(this,arguments))}return Object(x.a)(a,e),Object(k.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"mt-3  container"},o.a.createElement("h2",{className:"mb-3"},"CMS - menus and pages"),o.a.createElement(ue,null))}}]),a}(c.Component),me=Object(d.b)(null,n)(M(pe)),de=function(){return function(){var e=Object(A.a)(I.a.mark(function e(a){var t,n;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.prev=1,e.next=4,R.a.get(J+"/api/users/clients?token="+t);case 4:n=e.sent,a({type:"users_get_clients",payload:n.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a({type:"users_res",payload:{success:!1,message:"Unknown problem with ajax, while get clients"}});case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(a){return e.apply(this,arguments)}}()},ge=t(50),he=(t(281),function(e){function a(){return Object(w.a)(this,a),Object(_.a)(this,Object(N.a)(a).apply(this,arguments))}return Object(x.a)(a,e),Object(k.a)(a,[{key:"componentDidMount",value:function(){this.props.getClients()}},{key:"render",value:function(){var e=this.props.clients,a="";return this.props.usersRes&&!1===this.props.usersRes.success&&(a=o.a.createElement(ie,{delay:5e3},o.a.createElement("div",{className:"alert alert-danger",role:"alert"},JSON.stringify(this.props.usersRes.message,null,2)))),this.props.usersRes&&!0===this.props.usersRes.success&&(a=o.a.createElement(ie,{delay:5e3},o.a.createElement("div",{className:"alert alert-success",role:"alert"},JSON.stringify(this.props.usersRes.message,null,2)))),o.a.createElement("div",{className:"mt-3 mb-2"},o.a.createElement("div",{className:"wrapMsg"},a),o.a.createElement("div",{className:"row"},o.a.createElement(ge.BootstrapTable,{data:e},o.a.createElement(ge.TableHeaderColumn,{dataField:"id",isKey:!0},"ID"),o.a.createElement(ge.TableHeaderColumn,{dataField:"name"},"Client Name"),o.a.createElement(ge.TableHeaderColumn,{dataField:"email"},"Client Email"))))}}]),a}(c.Component));var fe=Object(d.b)(function(e){return{clients:e.users.clients,usersRes:e.users.users_res}},r)(he),ve=function(e){function a(){return Object(w.a)(this,a),Object(_.a)(this,Object(N.a)(a).apply(this,arguments))}return Object(x.a)(a,e),Object(k.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"mt-3  container"},o.a.createElement("h2",{className:"mb-3"},"Users"),o.a.createElement(fe,null))}}]),a}(c.Component),ye=Object(d.b)(null,r)(M(ve)),be=function(e,a){return function(){var t=Object(A.a)(I.a.mark(function t(n){var r;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R.a.post(J+"/api/register",e);case 3:r=t.sent,n({type:"auth_user",payload:r.data.data.token}),localStorage.setItem("token",r.data.data.token),a(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:"auth_error",payload:"Email in use"});case 12:case"end":return t.stop()}},t,null,[[0,9]])}));return function(e){return t.apply(this,arguments)}}()},Ee=function(e,a){return function(){var t=Object(A.a)(I.a.mark(function t(n){var r;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R.a.post(J+"/api/login",e);case 3:r=t.sent,n({type:"auth_user",payload:r.data.data.token}),localStorage.setItem("token",r.data.data.token),a(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:"auth_error",payload:"Invalid login credentials"});case 12:case"end":return t.stop()}},t,null,[[0,9]])}));return function(e){return t.apply(this,arguments)}}()},je=function(e){return function(a){localStorage.removeItem("token"),a({type:"auth_user",payload:""}),e()}},Oe=function(e){function a(){return Object(w.a)(this,a),Object(_.a)(this,Object(N.a)(a).apply(this,arguments))}return Object(x.a)(a,e),Object(k.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.signout(function(){e.props.history.push("/admin/")})}},{key:"render",value:function(){return o.a.createElement("div",null,"Sorry to see you go")}}]),a}(c.Component),we=Object(d.b)(null,s)(Oe),ke=t(321),_e=t(320),Ne=function(e){function a(){var e,t;Object(w.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(_.a)(this,(e=Object(N.a)(a)).call.apply(e,[this].concat(r)))).onSubmit=function(e){t.props.signin(e,function(){return t.props.history.push("/admin/pages")})},t}return Object(x.a)(a,e),Object(k.a)(a,[{key:"render",value:function(){var e=this.props.handleSubmit;return o.a.createElement("form",{className:"container mt-4",onSubmit:e(this.onSubmit)},o.a.createElement("fieldset",{className:"col-4 form-group"},o.a.createElement("label",null,"Email"),o.a.createElement(ke.a,{className:"form-control  mb-2",name:"email",type:"text",component:"input",autoComplete:"none"})),o.a.createElement("fieldset",{className:"col-4  form-group"},o.a.createElement("label",null,"Password"),o.a.createElement(ke.a,{className:"form-control  mb-2",name:"password",type:"password",component:"input",autoComplete:"none"})),o.a.createElement("div",null,this.props.errorMessage),o.a.createElement("button",{className:"btn btn-primary mt-2 mr-sm-2"},"Sign In!"))}}]),a}(c.Component);var xe=Object(g.compose)(Object(d.b)(function(e){return{errorMessage:e.auth.errorMessage}},s),Object(_e.a)({form:"signin"}))(Ne);l.a.render(o.a.createElement(function(e){var a=e.children,t=e.initialState,n=void 0===t?{}:t,r=Object(g.createStore)(j,Object(m.a)({auth:{authenticated:localStorage.getItem("token")}},n),Object(h.composeWithDevTools)(Object(g.applyMiddleware)(O.a)));return o.a.createElement(d.a,{store:r},a)},null,o.a.createElement(u.a,null,o.a.createElement(function(e){var a=e.children;return o.a.createElement("div",null,o.a.createElement(C,null),a)},null,o.a.createElement(p.a,{path:"/admin",exact:!0,component:xe}),o.a.createElement(p.a,{path:"/admin/pages",component:me}),o.a.createElement(p.a,{path:"/admin/users",component:ye}),o.a.createElement(p.a,{path:"/admin/signout",component:we}),o.a.createElement(p.a,{path:"/admin/signin",component:xe})))),document.querySelector("#root"))}},[[138,1,2]]]);
//# sourceMappingURL=main.acbf8c0e.chunk.js.map