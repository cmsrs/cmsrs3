(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{138:function(e,t,a){e.exports=a(311)},311:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"delImage",function(){return K}),a.d(n,"changePosition",function(){return L}),a.d(n,"delMenu",function(){return W}),a.d(n,"delPage",function(){return V}),a.d(n,"getMenus",function(){return q}),a.d(n,"getPages",function(){return z}),a.d(n,"addMenu",function(){return G}),a.d(n,"saveMenu",function(){return Q}),a.d(n,"savePage",function(){return X}),a.d(n,"changeMenu",function(){return Y}),a.d(n,"changePage",function(){return Z});var r={};a.r(r),a.d(r,"delImage",function(){return ve}),a.d(r,"getShopPages",function(){return ye}),a.d(r,"getProducts",function(){return be}),a.d(r,"saveProduct",function(){return Ee}),a.d(r,"setProduct",function(){return je}),a.d(r,"deleteProduct",function(){return ke}),a.d(r,"changeProduct",function(){return we});var s={};a.r(s),a.d(s,"getClients",function(){return De});var c={};a.r(c),a.d(c,"signup",function(){return Te}),a.d(c,"signin",function(){return Be}),a.d(c,"signout",function(){return Je});var o=a(0),u=a.n(o),i=a(27),l=a.n(i),p=a(39),d=a(36),m=a(5),g=a(3),h=a(14),f=a(131),v=a(314),y="pages_res",b={authenticated:"",errorMessage:""},E={menus:[],page:{},pages:[]},j={products:[],product:{},check_products:{}},k={users:[]},w=Object(h.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth_user":return Object(m.a)({},e,{authenticated:t.payload});case"auth_error":return Object(m.a)({},e,{errorMessage:t.payload});default:return e}},pages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"pages_add_menu":var a=e.menus.slice();return a.push(t.payload),Object(m.a)({},e,{menus:a});case"pages_save_page":return Object(m.a)({},e,{page:{title:"",short_title:"",published:0,type:"cms",menu_id:""}});case"pages_change_menu":var n=e.menus.map(function(e){return e.id===t.payload.id?t.payload:e});return Object(m.a)({},e,{menus:n,pages_res:{}});case"pages_change_page":return Object(m.a)({},e,{page:t.payload,pages_res:{}});case y:return Object(m.a)({},e,{pages_res:t.payload});case"pages_get_menu":return Object(m.a)({},e,{menus:t.payload});case"pages_save_pages":return Object(m.a)({},e,{pages:t.payload});case"pages_delete_menu":var r=e.menus.slice(),s=[],c=!0,o=!1,u=void 0;try{for(var i,l=r[Symbol.iterator]();!(c=(i=l.next()).done);c=!0){var p=i.value;p.id!==t.payload&&s.push(p)}}catch(w){o=!0,u=w}finally{try{c||null==l.return||l.return()}finally{if(o)throw u}}return Object(m.a)({},e,{menus:s});case"pages_delete_page":var d=e.pages.slice(),g=[],h=!0,f=!1,v=void 0;try{for(var b,j=d[Symbol.iterator]();!(h=(b=j.next()).done);h=!0){var k=b.value;k.id!==t.payload&&g.push(k)}}catch(w){f=!0,v=w}finally{try{h||null==j.return||j.return()}finally{if(f)throw v}}return Object(m.a)({},e,{pages:g});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"users_res":return Object(m.a)({},e,{users_res:t.payload});case"users_get_clients":return Object(m.a)({},e,{clients:t.payload});default:return e}},products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"products_res":return Object(m.a)({},e,{products_res:t.payload});case"products_get_products":return Object(m.a)({},e,{products:t.payload,products_res:{}});case"products_get_pages":return Object(m.a)({},e,{shop_pages:t.payload,products_res:{}});case"products_get_product":return Object(m.a)({},e,{product:{name:"",sku:"",price:0,description:"",page_id:"",images:[]},products_res:{}});case"products_change_product":case"products_set_product":return Object(m.a)({},e,{product:t.payload,products_res:{}});case"products_delete_product":var a=e.products.slice(),n=[],r=!0,s=!1,c=void 0;try{for(var o,u=a[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var i=o.value;i.id!==t.payload&&n.push(i)}}catch(l){s=!0,c=l}finally{try{r||null==u.return||u.return()}finally{if(s)throw c}}return Object(m.a)({},e,{products:n,products_res:{}});default:return e}},form:v.a}),O=a(133),_=a(7),N=a(8),P=a(10),x=a(9),C=a(11),S=function(e){function t(){return Object(_.a)(this,t),Object(P.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(N.a)(t,[{key:"renderLinks",value:function(){if(this.props.authenticated)return u.a.createElement("div",{className:"container-fluid"},u.a.createElement("div",{className:"container"},u.a.createElement(p.b,{to:"/admin/pages"},"Pages"),u.a.createElement(p.b,{className:"ml-4",to:"/admin/users"},"Users"),u.a.createElement(p.b,{className:"ml-4",to:"/admin/products"},"Products")),u.a.createElement(p.b,{to:"/admin/signout"},"Sign Out"))}},{key:"render",value:function(){return u.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},this.renderLinks())}}]),t}(o.Component);var I=Object(g.b)(function(e){return{authenticated:e.auth.authenticated}})(S),M=function(e){var t=function(t){function a(){return Object(_.a)(this,a),Object(P.a)(this,Object(x.a)(a).apply(this,arguments))}return Object(C.a)(a,t),Object(N.a)(a,[{key:"componentDidMount",value:function(){this.shouldNavigateAway()}},{key:"componentDidUpdate",value:function(){this.shouldNavigateAway()}},{key:"shouldNavigateAway",value:function(){this.props.auth||this.props.history.push("/admin/")}},{key:"render",value:function(){return u.a.createElement(e,this.props)}}]),a}(o.Component);return Object(g.b)(function(e){return{auth:e.auth.authenticated}})(t)},D=a(6),R=a.n(D),A=a(17),F=a(15),U=a.n(F),T=function(e,t){var a=null,n=!0,r=!1,s=void 0;try{for(var c,o=e[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var u=c.value;if(u.id===t){a=u;break}}}catch(i){r=!0,s=i}finally{try{n||null==o.return||o.return()}finally{if(r)throw s}}return a},B=function(e){return!!e&&e[0]+e[1]+e[2]==="rs_"},J=function(e,t){var a=[];if(B(t))return a;var n=!0,r=!1,s=void 0;try{for(var c,o=e[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var u=c.value;t||u.menu_id?parseInt(u.menu_id)===t&&a.push(u):a.push(u)}}catch(i){r=!0,s=i}finally{try{n||null==o.return||o.return()}finally{if(r)throw s}}return a},H="http://cmsrs3.loc",K=function(e,t){return function(){var a=Object(A.a)(R.a.mark(function a(n){var r,s;return R.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=localStorage.getItem("token"),a.prev=1,a.next=4,U.a.delete(H+"/api/images/"+e+"?token="+r);case 4:(s=a.sent).data.success?n({type:y,payload:{success:!0,message:"Data was saved"}}):n({type:y,payload:{success:!1,message:s.data.error}}),t(),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),n({type:y,payload:{success:!1,message:"Unknown problem with ajax, while deleteing image"}});case 12:case"end":return a.stop()}},a,null,[[1,9]])}));return function(e){return a.apply(this,arguments)}}()},L=function(e,t,a,n){return function(){var r=Object(A.a)(R.a.mark(function r(s){var c;return R.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return c=localStorage.getItem("token"),r.prev=1,r.next=4,U.a.get(H+"/api/"+a+"/position/"+e+"/"+t+"?token="+c);case 4:r.sent.data.success?s({type:y,payload:{success:!0,message:"Data was saved"}}):s({type:y,payload:{success:!1,message:"Problem with change position "+a}}),n(),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),s({type:y,payload:{success:!1,message:"Unknown problem with ajax, while change "+a+" position"}});case 12:case"end":return r.stop()}},r,null,[[1,9]])}));return function(e){return r.apply(this,arguments)}}()},W=function(e){return function(){var t=Object(A.a)(R.a.mark(function t(a){var n,r,s;return R.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=localStorage.getItem("token"),r=B(e),t.prev=2,r){t.next=8;break}return t.next=6,U.a.delete(H+"/api/menus/"+e+"?token="+n);case 6:(s=t.sent).data.success?a({type:y,payload:{success:!0,message:"Data was saved"}}):a({type:y,payload:{success:!1,message:s.data.error}});case 8:a({type:"pages_delete_menu",payload:e}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),a({type:y,payload:{success:!1,message:"Unknown problem with ajax, while deleteing menu"}});case 14:case"end":return t.stop()}},t,null,[[2,11]])}));return function(e){return t.apply(this,arguments)}}()},V=function(e){return function(){var t=Object(A.a)(R.a.mark(function t(a){var n,r;return R.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=localStorage.getItem("token"),t.prev=1,t.next=4,U.a.delete(H+"/api/pages/"+e+"?token="+n);case 4:(r=t.sent).data.success?a({type:y,payload:{success:!0,message:"Data was saved"}}):a({type:y,payload:{success:!1,message:r.data.error}}),a({type:"pages_delete_page",payload:e}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),a({type:y,payload:{success:!1,message:"Unknown problem with ajax, while deleteing page"}});case 12:case"end":return t.stop()}},t,null,[[1,9]])}));return function(e){return t.apply(this,arguments)}}()},q=function(){return function(){var e=Object(A.a)(R.a.mark(function e(t){var a,n;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("token"),e.prev=1,e.next=4,U.a.get(H+"/api/menus?token="+a);case 4:n=e.sent,t({type:"pages_get_menu",payload:n.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:y,payload:{success:!1,message:"Unknown problem with ajax, while get menu"}});case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},z=function(){return function(){var e=Object(A.a)(R.a.mark(function e(t){var a,n;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("token"),e.prev=1,e.next=4,U.a.get(H+"/api/pages?token="+a);case 4:n=e.sent,t({type:"pages_save_pages",payload:n.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:y,payload:{success:!1,message:"Unknown problem with ajax, while get pages"}});case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},G=function(e){return function(t){t({type:"pages_add_menu",payload:e})}},Q=function(e,t){return function(){var a=Object(A.a)(R.a.mark(function a(n){var r,s,c;return R.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(r=localStorage.getItem("token"),s=B(e.id),a.prev=2,c=null,!s){a.next=10;break}return a.next=7,U.a.post(H+"/api/menus?token="+r,e);case 7:c=a.sent,a.next=13;break;case 10:return a.next=12,U.a.put(H+"/api/menus/"+e.id+"?token="+r,e);case 12:c=a.sent;case 13:c.data.success?(console.log("___ok___"),n({type:y,payload:{success:!0,message:"Data was saved"}}),t()):n({type:y,payload:{success:!1,message:c.data.error}}),a.next=20;break;case 16:a.prev=16,a.t0=a.catch(2),console.log("___probem with ajax______",a.t0),n({type:y,payload:{success:!1,message:"Unknown problem with ajax, while save Menu"}});case 20:case"end":return a.stop()}},a,null,[[2,16]])}));return function(e){return a.apply(this,arguments)}}()},X=function(e,t){return function(){var a=Object(A.a)(R.a.mark(function a(n){var r,s,c;return R.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(r=localStorage.getItem("token"),a.prev=1,s=null,!e.id){a.next=9;break}return a.next=6,U.a.put(H+"/api/pages/"+e.id+"?token="+r,e);case 6:s=a.sent,a.next=12;break;case 9:return a.next=11,U.a.post(H+"/api/pages?token="+r,e);case 11:s=a.sent;case 12:s.data.success?(c=e.id?e.id:s.data.data.pageId,n({type:y,payload:{success:!0,message:"Data was saved"}}),n({type:"pages_save_page",payload:e}),t(c)):n({type:y,payload:{success:!1,message:s.data.error}}),a.next=19;break;case 15:a.prev=15,a.t0=a.catch(1),console.log("___probem with ajax______",a.t0),n({type:y,payload:{success:!1,message:"Unknown problem with ajax, while save page"}});case 19:case"end":return a.stop()}},a,null,[[1,15]])}));return function(e){return a.apply(this,arguments)}}()},Y=function(e){return function(t){t({type:"pages_change_menu",payload:e})}},Z=function(e){return function(t){t({type:"pages_change_page",payload:e})}},$=a(32),ee=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(P.a)(this,Object(x.a)(t).call(this,e))).delPage=function(){a.props.delPage(a.data.id)},a.getDataFromProps=function(){var e=a.props.pages.filter(function(e){return e.id===a.data.id});return e.length?e[0]:{}},a.downPage=function(){a.props.changePosition("down",a.data.id,"pages",function(){a.props.getPages()})},a.upPage=function(){a.props.changePosition("up",a.data.id,"pages",function(){a.props.getPages()})},a.editPage=function(){var e=a.getDataFromProps();a.props.changePage(e)},a.data=a.props.data,a}return Object(C.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.getDataFromProps(),t=J(this.props.pages,e.menu_id);return u.a.createElement("div",{className:"mb-2 row"},u.a.createElement("div",null,e.title),u.a.createElement("div",{className:"ml-2 mr-2",onClick:this.editPage},u.a.createElement("i",{className:"far fa-edit cursor-pointer"})),u.a.createElement("div",{className:"trash",onClick:this.delPage},u.a.createElement("i",{className:"fas fa-trash cursor-pointer","aria-hidden":"true"})),t.length>1&&u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"ml-2",onClick:this.downPage},u.a.createElement("i",{className:"fas fa-arrow-down cursor-pointer"})),u.a.createElement("div",{className:"ml-2",onClick:this.upPage},u.a.createElement("i",{className:"fas fa-arrow-up cursor-pointer"}))))}}]),t}(o.Component);var te=Object(g.b)(function(e){return{pages:e.pages.pages}},n)(ee),ae=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(P.a)(this,Object(x.a)(t).call(this,e))).handleChange=function(e){var t=T(a.props.menus,a.data.id),n=Object(m.a)({},t,Object($.a)({},e.target.name,e.target.value));a.props.changeMenu(n)},a.getCountMenu=function(){var e=[],t=!0,n=!1,r=void 0;try{for(var s,c=a.props.menus[Symbol.iterator]();!(t=(s=c.next()).done);t=!0){var o=s.value;B(o.id)||e.push(o)}}catch(u){n=!0,r=u}finally{try{t||null==c.return||c.return()}finally{if(n)throw r}}return e.length},a.saveMenu=function(){var e=T(a.props.menus,a.data.id);e.position||(e.position=a.getCountMenu()+1),a.props.saveMenu(e,function(){a.props.getMenus()})},a.delMenu=function(){a.props.delMenu(a.data.id)},a.showPageTitle=function(e){var t="";return Array.isArray(e)&&(t=e.map(function(e,t){return u.a.createElement(te,{key:e.id,data:e})})),t},a.downMenu=function(){a.props.changePosition("down",a.data.id,"menus",function(){a.props.getMenus()})},a.upMenu=function(){a.props.changePosition("up",a.data.id,"menus",function(){a.props.getMenus()})},a.data=a.props.data,a}return Object(C.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e={},t=!1;Array.isArray(this.props.menus)&&(e=T(this.props.menus,this.data.id),t=B(e.id));var a=J(this.props.pages,this.data.id);return u.a.createElement("div",null,u.a.createElement("div",{className:"form-group form-inline mb-2"},u.a.createElement("input",{type:"text",placeholder:"Menu name",name:"name",className:"form-control col-3 mr-1",onChange:this.handleChange,value:e.name||""}),u.a.createElement("div",{className:"ml-2",onClick:this.saveMenu},u.a.createElement("i",{className:"far fa-save cursor-pointer"})),u.a.createElement("div",{className:"ml-2 trash",onClick:this.delMenu},u.a.createElement("i",{className:"fas fa-trash cursor-pointer","aria-hidden":"true"})),!t&&this.getCountMenu()>1&&u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"ml-2",onClick:this.downMenu},u.a.createElement("i",{className:"fas fa-arrow-down cursor-pointer"})),u.a.createElement("div",{className:"ml-2",onClick:this.upMenu},u.a.createElement("i",{className:"fas fa-arrow-up cursor-pointer"})))),u.a.createElement("div",{className:"ml-3"},this.showPageTitle(a)))}}]),t}(o.Component);var ne=Object(g.b)(function(e){return{menus:e.pages.menus,pages:e.pages.pages}},n)(ae),re=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(P.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(r)))).delImage=function(){a.props.delImage(a.props.data.id,function(){a.props.getPages()})},a.downImage=function(){a.props.changePosition("down",a.props.data.id,"images",function(){a.props.getPages()})},a.upImage=function(){a.props.changePosition("up",a.props.data.id,"images",function(){a.props.getPages()})},a}return Object(C.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{className:"ml-1  mt-3 row"},u.a.createElement("img",{src:H+this.props.data.fs.small,alt:this.props.data.name}),u.a.createElement("div",{className:"trash ml-2",onClick:this.delImage},u.a.createElement("i",{className:"fas fa-trash cursor-pointer","aria-hidden":"true"})),this.props.imagesByPage.length>1&&u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"ml-2",onClick:this.downImage},u.a.createElement("i",{className:"fas fa-arrow-down cursor-pointer"})),u.a.createElement("div",{className:"ml-2",onClick:this.upImage},u.a.createElement("i",{className:"fas fa-arrow-up cursor-pointer"}))))}}]),t}(o.Component),se=Object(g.b)(null,n)(re),ce=a(135),oe=a.n(ce),ue=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(P.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(r)))).getPagePositionByMenuId=function(e){return e=e?parseInt(e):null,J(a.props.pages,e).length+1},a.handleSubmit=function(e){e.preventDefault();var t=Object(m.a)({},a.props.page);t.position=a.getPagePositionByMenuId(t.menu_id),t.images=a.images?a.images.slice():[],a.props.savePage(t,function(e){document.getElementsByName("images")[0].value=null,a.images=[],a.props.getPages()})},a.onEditorChange=function(e){var t;t=Object(m.a)({},a.props.page,{content:e.editor.getData()}),a.props.changePage(t)},a.handleChangePage=function(e){var t;t="published"===e.target.name?Object(m.a)({},a.props.page,Object($.a)({},e.target.name,e.target.checked)):Object(m.a)({},a.props.page,Object($.a)({},e.target.name,e.target.value)),a.props.changePage(t)},a.createImage=function(e){a.images=[];for(var t=function(t){var n=e[t],r=e[t].name,s=new FileReader;s.onload=function(e){a.images.push({data:e.target.result,name:r})},s.readAsDataURL(n)},n=0;n<e.length;n++)t(n)},a.handleUploadFile=function(e){var t=e.target.files;t.length&&a.createImage(t)},a.showImages=function(e){var t="";return Array.isArray(e)&&(t=e.map(function(t,a){return u.a.createElement(se,{key:t.id,data:t,imagesByPage:e})})),t},a.getImages=function(e,t){var a=e.filter(function(e){return e.id===t});return a.length&&a[0].images.length?a[0].images:[]},a}return Object(C.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){this.props.getPages()}},{key:"getMenuValues",value:function(){var e=[];e.push({id:null,name:""});var t=!0,a=!1,n=void 0;try{for(var r,s=this.props.menus[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var c=r.value;B(c.id)||e.push(c)}}catch(o){a=!0,n=o}finally{try{t||null==s.return||s.return()}finally{if(a)throw n}}return e}},{key:"render",value:function(){var e=this.getMenuValues(),t=[];this.props.page.id&&(t=this.getImages(this.props.pages,this.props.page.id));var a=this.props.page.id?"Edit page":"Add page";return u.a.createElement("div",null,u.a.createElement("form",{onSubmit:this.handleSubmit},u.a.createElement("button",{type:"submit",className:"add-page-btn  btn btn-primary mt-2 mb-2"},u.a.createElement("i",{className:"fas fa-plus"})," ",a),u.a.createElement("div",{className:"form-group"},u.a.createElement("input",{type:"text",placeholder:"Title",name:"title",className:"form-control col-5",onChange:this.handleChangePage,value:this.props.page.title||""})),u.a.createElement("div",{className:"form-group"},u.a.createElement("input",{type:"text",placeholder:"Short title",name:"short_title",className:"form-control col-5",onChange:this.handleChangePage,value:this.props.page.short_title||""})),u.a.createElement("div",{className:"form-check row"},u.a.createElement("input",{className:"col-1",name:"published",type:"checkbox",checked:this.props.page.published||0,onChange:this.handleChangePage}),u.a.createElement("label",null,"Published")),u.a.createElement("div",{className:"form-group"},u.a.createElement("select",{name:"type",onChange:this.handleChangePage,value:this.props.page.type},u.a.createElement("option",{value:"cms"},"cms"),u.a.createElement("option",{value:"gallery"},"gallery"),u.a.createElement("option",{value:"shop"},"shop")),u.a.createElement("label",{className:"ml-1"},"Type")),u.a.createElement("div",{className:"form-group"},u.a.createElement("select",{name:"menu_id",onChange:this.handleChangePage,value:this.props.page.menu_id||""},e.map(function(e){return u.a.createElement("option",{key:e.id,value:e.id||""},e.name||"")})),u.a.createElement("label",{className:"ml-1"},"Menu")),u.a.createElement("div",{className:"form-group"},u.a.createElement("label",{htmlFor:"comment"},"Content"),u.a.createElement(oe.a,{data:this.props.page.content||"",onChange:this.onEditorChange})),u.a.createElement("div",{className:"form-group"},u.a.createElement("input",{type:"file",name:"images",onChange:this.handleUploadFile,multiple:!0})),this.showImages(t)))}}]),t}(o.Component);var ie=Object(g.b)(function(e){return{menus:e.pages.menus,pages:e.pages.pages,page:e.pages.page}},n)(ue),le=a(136),pe=a.n(le),de=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(P.a)(this,Object(x.a)(t).call(this,e))).state={visible:!0},a}return Object(C.a)(t,e),Object(N.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.children!==this.props.children&&(this.setTimer(),this.setState({visible:!0}))}},{key:"componentDidMount",value:function(){this.setTimer()}},{key:"setTimer",value:function(){null!=this._timer&&clearTimeout(this._timer),this._timer=setTimeout(function(){this.setState({visible:!1}),this._timer=null}.bind(this),this.props.delay)}},{key:"componentWillUnmount",value:function(){clearTimeout(this._timer)}},{key:"render",value:function(){return this.state.visible?u.a.createElement("div",null,this.props.children):u.a.createElement("span",null)}}]),t}(u.a.Component),me=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(P.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault()},a.getNotRelatedPages=function(){var e=[],t=!0,n=!1,r=void 0;try{for(var s,c=a.props.pages[Symbol.iterator]();!(t=(s=c.next()).done);t=!0){var o=s.value;o.menu_id||e.push(o)}}catch(u){n=!0,r=u}finally{try{t||null==c.return||c.return()}finally{if(n)throw r}}return e},a.showMenuPages=function(e){var t="";return Array.isArray(e)&&(t=e.map(function(e,t){return u.a.createElement(ne,{key:e.id,data:e})})),t},a.showPageTitle=function(e){var t="";return Array.isArray(e)&&(t=e.map(function(e,t){return u.a.createElement(te,{key:e.id,data:e})})),t},a.handleAddMenu=function(){var e={id:"rs_"+pe.a.generate(),name:"",position:""};a.props.addMenu(e)},a.renderMsg=function(e){return console.log("msg_err",e),JSON.stringify(e,null,2)},a}return Object(C.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){this.props.getMenus(),this.props.getPages()}},{key:"render",value:function(){var e=this.getNotRelatedPages(),t="";this.props.pagesRes&&!1===this.props.pagesRes.success&&(t=u.a.createElement(de,{delay:5e3},u.a.createElement("div",{className:"alert alert-danger",role:"alert"},JSON.stringify(this.props.pagesRes.message,null,2)))),this.props.pagesRes&&!0===this.props.pagesRes.success&&(t=u.a.createElement(de,{delay:5e3},u.a.createElement("div",{className:"alert alert-success",role:"alert"},JSON.stringify(this.props.pagesRes.message,null,2))));var a=this.props.menus;return u.a.createElement("div",{className:"mt-3 mb-2"},u.a.createElement("div",{className:"wrapMsg"},t),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-6"},u.a.createElement("button",{id:"add_menu",className:"btn btn-primary mt-2 mb-2",onClick:this.handleAddMenu},u.a.createElement("i",{className:"fas fa-plus"})," Add menu"),u.a.createElement("form",{onSubmit:this.handleSubmit},this.showMenuPages(a)),e.length>0&&u.a.createElement(u.a.Fragment,null,u.a.createElement("h3",{className:"mt-3"},"Pages not related to menu"),u.a.createElement("div",{className:"ml-3"},this.showPageTitle(e)))),u.a.createElement("div",{className:"col-6"},u.a.createElement(ie,null))))}}]),t}(o.Component);var ge=Object(g.b)(function(e){return{menus:e.pages.menus,pages:e.pages.pages,pagesRes:e.pages.pages_res}},n)(me),he=function(e){function t(){return Object(_.a)(this,t),Object(P.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{className:"mt-3  container"},u.a.createElement("h2",{className:"mb-3"},"CMS - menus and pages"),u.a.createElement(ge,null))}}]),t}(o.Component),fe=Object(g.b)(null,n)(M(he)),ve=function(e,t){return function(){var a=Object(A.a)(R.a.mark(function a(n){var r,s;return R.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=localStorage.getItem("token"),a.prev=1,a.next=4,U.a.delete(H+"/api/images/"+e+"?token="+r);case 4:(s=a.sent).data.success?n({type:"products_res",payload:{success:!0,message:"Data was saved"}}):n({type:"products_res",payload:{success:!1,message:s.data.error}}),t(),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),n({type:"products_res",payload:{success:!1,message:"Unknown problem with ajax, while deleteing image"}});case 12:case"end":return a.stop()}},a,null,[[1,9]])}));return function(e){return a.apply(this,arguments)}}()},ye=function(){return function(){var e=Object(A.a)(R.a.mark(function e(t){var a,n;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("token"),e.prev=1,e.next=4,U.a.get(H+"/api/pages/type/shop?token="+a);case 4:n=e.sent,t({type:"products_get_pages",payload:n.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"products_res",payload:{success:!1,message:"Unknown problem with ajax, while get pages for products"}});case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},be=function(e){return function(){var t=Object(A.a)(R.a.mark(function t(a){var n,r;return R.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=localStorage.getItem("token"),t.prev=1,t.next=4,U.a.get(H+"/api/products?token="+n);case 4:r=t.sent,a({type:"products_get_products",payload:r.data.data}),e(r.data.data),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),a({type:"products_res",payload:{success:!1,message:"Unknown problem with ajax, while get products"}});case 12:case"end":return t.stop()}},t,null,[[1,9]])}));return function(e){return t.apply(this,arguments)}}()},Ee=function(e,t){return function(){var a=Object(A.a)(R.a.mark(function a(n){var r,s,c;return R.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(r=localStorage.getItem("token"),a.prev=1,s=null,!e.id){a.next=9;break}return a.next=6,U.a.put(H+"/api/products/"+e.id+"?token="+r,e);case 6:s=a.sent,a.next=12;break;case 9:return a.next=11,U.a.post(H+"/api/products?token="+r,e);case 11:s=a.sent;case 12:s.data.success?(c=e.id?e.id:s.data.data.productId,n({type:"products_res",payload:{success:!0,message:"Data was saved"}}),n({type:"products_get_product",payload:e}),t(c)):n({type:"products_res",payload:{success:!1,message:s.data.error}}),a.next=19;break;case 15:a.prev=15,a.t0=a.catch(1),console.log("___probem with ajax______",a.t0),n({type:"products_res",payload:{success:!1,message:"Unknown problem with ajax, while save page"}});case 19:case"end":return a.stop()}},a,null,[[1,15]])}));return function(e){return a.apply(this,arguments)}}()},je=function(e){return function(t){t({type:"products_set_product",payload:e})}},ke=function(e){return function(){var t=Object(A.a)(R.a.mark(function t(a){var n,r;return R.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=localStorage.getItem("token"),t.prev=1,t.next=4,U.a.delete(H+"/api/products/"+e+"?token="+n);case 4:(r=t.sent).data.success?a({type:"products_res",payload:{success:!0,message:"Data was saved"}}):a({type:"products_res",payload:{success:!1,message:r.data.error}}),a({type:"products_delete_product",payload:e}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),a({type:"products_res",payload:{success:!1,message:"Unknown problem with ajax, while deleteing product"}});case 12:case"end":return t.stop()}},t,null,[[1,9]])}));return function(e){return t.apply(this,arguments)}}()},we=function(e){return function(t){t({type:"products_change_product",payload:e})}},Oe=a(31),_e=(a(119),function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(P.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(r)))).delImage=function(){a.props.delImage(a.props.data.id,function(){a.props.getProducts(function(e){var t=a.getDataFromProps(e,a.props.productId);a.props.setProduct(t)})})},a.getDataFromProps=function(e,t){var a=e.filter(function(e){return e.id===parseInt(t)});return a.length?a[0]:{}},a}return Object(C.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{className:"ml-1  mt-3 row"},u.a.createElement("img",{src:H+this.props.data.fs.small,alt:this.props.data.name}),u.a.createElement("div",{className:"trash ml-2",onClick:this.delImage},u.a.createElement("i",{className:"fas fa-trash cursor-pointer","aria-hidden":"true"})))}}]),t}(o.Component)),Ne=Object(g.b)(null,r)(_e),Pe=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(P.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(r)))).getShopPages=function(){var e=[];if(e.push(""),a.props.shop_pages){var t=!0,n=!1,r=void 0;try{for(var s,c=a.props.shop_pages[Symbol.iterator]();!(t=(s=c.next()).done);t=!0){var o=s.value;e.push(o)}}catch(u){n=!0,r=u}finally{try{t||null==c.return||c.return()}finally{if(n)throw r}}}return e},a.handleSubmit=function(e){e.preventDefault();var t=Object(m.a)({},a.props.product);t.images=a.images?a.images.slice():[],a.props.saveProduct(t,function(e){document.getElementsByName("images")[0].value=null,a.images=[],a.props.getProducts(function(e){}),a.setState({productsCheck:null})})},a.handleChangeProduct=function(e){var t;t=Object(m.a)({},a.props.product,Object($.a)({},e.target.name,e.target.value)),a.props.changeProduct(t)},a.showImages=function(e){var t="";return Array.isArray(e)&&(t=e.map(function(t,a){return u.a.createElement(Ne,{key:t.id,data:t,imagesByPage:e})})),t},a.createImage=function(e){a.images=[];for(var t=function(t){var n=e[t],r=e[t].name,s=new FileReader;s.onload=function(e){a.images.push({data:e.target.result,name:r})},s.readAsDataURL(n)},n=0;n<e.length;n++)t(n)},a.handleUploadFile=function(e){var t=e.target.files;t.length&&a.createImage(t)},a.showImages=function(e,t){var a="";return Array.isArray(e)&&(a=e.map(function(a,n){return u.a.createElement(Ne,{key:a.id,data:a,productId:t,imagesByPage:e})})),a},a}return Object(C.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){this.props.getShopPages()}},{key:"render",value:function(){var e=[];this.props.product.id&&(e=this.props.product.images);var t=[];t=this.getShopPages();var a=this.props.product.id?"Edit product":"Add product";return u.a.createElement("div",null,u.a.createElement("form",{onSubmit:this.handleSubmit},u.a.createElement("button",{type:"submit",className:"add-page-btn  btn btn-primary mt-2 mb-2"},u.a.createElement("i",{className:"fas fa-plus"})," ",a),u.a.createElement("div",{className:"form-group"},u.a.createElement("input",{type:"text",placeholder:"Name",name:"name",className:"form-control col-5",onChange:this.handleChangeProduct,value:this.props.product.name||""})),u.a.createElement("div",{className:"form-group"},u.a.createElement("input",{type:"text",placeholder:"Sku",name:"sku",className:"form-control col-5",onChange:this.handleChangeProduct,value:this.props.product.sku||""})),u.a.createElement("div",{className:"form-group"},u.a.createElement("input",{type:"text",placeholder:"Price",name:"price",className:"form-control col-5",onChange:this.handleChangeProduct,value:this.props.product.price||""})),u.a.createElement("div",{className:"form-group"},u.a.createElement("label",{htmlFor:"comment"},"Description"),u.a.createElement("textarea",{className:"form-control",rows:"5",name:"description",onChange:this.handleChangeProduct,value:this.props.product.description||""})),u.a.createElement("div",{className:"form-group"},u.a.createElement("select",{name:"page_id",onChange:this.handleChangeProduct,value:this.props.product.page_id||""},t.map(function(e){return u.a.createElement("option",{key:e.id,value:e.id||""},e.title||"")})),u.a.createElement("label",{className:"ml-1"},"Page")),u.a.createElement("div",{className:"form-group"},u.a.createElement("input",{type:"file",name:"images",onChange:this.handleUploadFile,multiple:!0})),this.showImages(e,this.props.product.id)))}}]),t}(o.Component);var xe=Object(g.b)(function(e){return{product:e.products.product,shop_pages:e.products.shop_pages}},r)(Pe),Ce=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(P.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(r)))).handleEditProduct=function(){if(a.state&&a.state.productsCheck){var e=a.getDataFromProps(a.state.productsCheck);a.props.setProduct(e)}a.refs.table.setState({selectedRowKeys:[]})},a.getDataFromProps=function(e){var t=a.props.products.filter(function(t){return t.id===parseInt(e)});return t.length?t[0]:{}},a.handleDeleteProduct=function(){a.state&&a.state.productsCheck&&a.props.deleteProduct(a.state.productsCheck)},a.onRowSelect=function(e,t,n){var r=null;t&&(r=e.id),a.setState({productsCheck:r})},a}return Object(C.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){this.props.getProducts(function(e){})}},{key:"render",value:function(){var e=this.props.products,t="";this.props.productsRes&&!1===this.props.productsRes.success&&(t=u.a.createElement(de,{delay:5e3},u.a.createElement("div",{className:"alert alert-danger",role:"alert"},JSON.stringify(this.props.productsRes.message,null,2)))),this.props.productsRes&&!0===this.props.productsRes.success&&(t=u.a.createElement(de,{delay:5e3},u.a.createElement("div",{className:"alert alert-success",role:"alert"},JSON.stringify(this.props.productsRes.message,null,2))));var a={mode:"radio",clickToSelect:!0,onSelect:this.onRowSelect};return u.a.createElement("div",{className:"mt-3 mb-2"},u.a.createElement("div",{className:"wrapMsg"},t),u.a.createElement(xe,{key:"1"}),u.a.createElement("br",null),u.a.createElement("button",{onClick:this.handleEditProduct},"Edit"),u.a.createElement("button",{onClick:this.handleDeleteProduct},"Delete"),u.a.createElement("div",{className:"row"},u.a.createElement(Oe.BootstrapTable,{ref:"table",data:e,selectRow:a},u.a.createElement(Oe.TableHeaderColumn,{dataField:"id",isKey:!0},"ID"),u.a.createElement(Oe.TableHeaderColumn,{dataField:"name"},"Product Name"),u.a.createElement(Oe.TableHeaderColumn,{dataField:"sku"},"Product SKU"))))}}]),t}(o.Component);var Se=Object(g.b)(function(e){return{products:e.products.products,productsRes:e.products.products_res}},r)(Ce),Ie=function(e){function t(){return Object(_.a)(this,t),Object(P.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{className:"mt-3  container"},u.a.createElement("h2",{className:"mb-3"},"Products"),u.a.createElement(Se,null))}}]),t}(o.Component),Me=Object(g.b)(null,r)(M(Ie)),De=function(){return function(){var e=Object(A.a)(R.a.mark(function e(t){var a,n;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("token"),e.prev=1,e.next=4,U.a.get(H+"/api/users/clients?token="+a);case 4:n=e.sent,t({type:"users_get_clients",payload:n.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"users_res",payload:{success:!1,message:"Unknown problem with ajax, while get clients"}});case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},Re=function(e){function t(){return Object(_.a)(this,t),Object(P.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){this.props.getClients()}},{key:"render",value:function(){var e=this.props.clients,t="";return this.props.usersRes&&!1===this.props.usersRes.success&&(t=u.a.createElement(de,{delay:5e3},u.a.createElement("div",{className:"alert alert-danger",role:"alert"},JSON.stringify(this.props.usersRes.message,null,2)))),this.props.usersRes&&!0===this.props.usersRes.success&&(t=u.a.createElement(de,{delay:5e3},u.a.createElement("div",{className:"alert alert-success",role:"alert"},JSON.stringify(this.props.usersRes.message,null,2)))),u.a.createElement("div",{className:"mt-3 mb-2"},u.a.createElement("div",{className:"wrapMsg"},t),u.a.createElement("div",{className:"row"},u.a.createElement(Oe.BootstrapTable,{data:e},u.a.createElement(Oe.TableHeaderColumn,{dataField:"id",isKey:!0},"ID"),u.a.createElement(Oe.TableHeaderColumn,{dataField:"name"},"Client Name"),u.a.createElement(Oe.TableHeaderColumn,{dataField:"email"},"Client Email"))))}}]),t}(o.Component);var Ae=Object(g.b)(function(e){return{clients:e.users.clients,usersRes:e.users.users_res}},s)(Re),Fe=function(e){function t(){return Object(_.a)(this,t),Object(P.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{className:"mt-3  container"},u.a.createElement("h2",{className:"mb-3"},"Users"),u.a.createElement(Ae,null))}}]),t}(o.Component),Ue=Object(g.b)(null,s)(M(Fe)),Te=function(e,t){return function(){var a=Object(A.a)(R.a.mark(function a(n){var r;return R.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,U.a.post(H+"/api/register",e);case 3:r=a.sent,n({type:"auth_user",payload:r.data.data.token}),localStorage.setItem("token",r.data.data.token),t(),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),n({type:"auth_error",payload:"Email in use"});case 12:case"end":return a.stop()}},a,null,[[0,9]])}));return function(e){return a.apply(this,arguments)}}()},Be=function(e,t){return function(){var a=Object(A.a)(R.a.mark(function a(n){var r;return R.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,U.a.post(H+"/api/login",e);case 3:r=a.sent,n({type:"auth_user",payload:r.data.data.token}),localStorage.setItem("token",r.data.data.token),t(),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),n({type:"auth_error",payload:"Invalid login credentials"});case 12:case"end":return a.stop()}},a,null,[[0,9]])}));return function(e){return a.apply(this,arguments)}}()},Je=function(e){return function(t){localStorage.removeItem("token"),t({type:"auth_user",payload:""}),e()}},He=function(e){function t(){return Object(_.a)(this,t),Object(P.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.signout(function(){e.props.history.push("/admin/")})}},{key:"render",value:function(){return u.a.createElement("div",null,"Sorry to see you go")}}]),t}(o.Component),Ke=Object(g.b)(null,c)(He),Le=a(313),We=a(312),Ve=function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(P.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(e){a.props.signin(e,function(){return a.props.history.push("/admin/pages")})},a}return Object(C.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props.handleSubmit;return u.a.createElement("form",{className:"container mt-4",onSubmit:e(this.onSubmit)},u.a.createElement("fieldset",{className:"col-4 form-group"},u.a.createElement("label",null,"Email"),u.a.createElement(Le.a,{className:"form-control  mb-2",name:"email",type:"text",component:"input",autoComplete:"none"})),u.a.createElement("fieldset",{className:"col-4  form-group"},u.a.createElement("label",null,"Password"),u.a.createElement(Le.a,{className:"form-control  mb-2",name:"password",type:"password",component:"input",autoComplete:"none"})),u.a.createElement("div",null,this.props.errorMessage),u.a.createElement("button",{className:"btn btn-primary mt-2 mr-sm-2"},"Sign In!"))}}]),t}(o.Component);var qe=Object(h.compose)(Object(g.b)(function(e){return{errorMessage:e.auth.errorMessage}},c),Object(We.a)({form:"signin"}))(Ve);l.a.render(u.a.createElement(function(e){var t=e.children,a=e.initialState,n=void 0===a?{}:a,r=Object(h.createStore)(w,Object(m.a)({auth:{authenticated:localStorage.getItem("token")}},n),Object(f.composeWithDevTools)(Object(h.applyMiddleware)(O.a)));return u.a.createElement(g.a,{store:r},t)},null,u.a.createElement(p.a,null,u.a.createElement(function(e){var t=e.children;return u.a.createElement("div",null,u.a.createElement(I,null),t)},null,u.a.createElement(d.a,{path:"/admin",exact:!0,component:qe}),u.a.createElement(d.a,{path:"/admin/pages",component:fe}),u.a.createElement(d.a,{path:"/admin/products",component:Me}),u.a.createElement(d.a,{path:"/admin/users",component:Ue}),u.a.createElement(d.a,{path:"/admin/signout",component:Ke}),u.a.createElement(d.a,{path:"/admin/signin",component:qe})))),document.querySelector("#root"))}},[[138,1,2]]]);
//# sourceMappingURL=main.60d8b038.chunk.js.map